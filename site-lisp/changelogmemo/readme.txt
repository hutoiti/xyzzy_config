$ readme.txt 2006-03-08 $

  changelogmemo for xyzzy

  by FUKAE Mitsuaki


■概要

  changelog で、メモをとります。


■はじめに

  これを使ってなんか問題が起きても責任は負えませんのでご了承ください。


■Changelog 形式について、用語の説明

  -------------------------------------------------------------------
  2004-07-11 (Sun)  YOUR NAME  <your@email.address>
  
  * other-buffer [Xyzzy]: 最近(?)表示されていたバッファ。
  
  -------------------------------------------------------------------
  のように記述します。
  日付と結び付けられたブロックをエントリ、ひとつのメモのブロックをアイテム
  と呼びます。


■インストール

  1. ファイルを展開する

     site-lisp/changelogmemo/ 以下に置いて下さい。

  2. 設定

     -- .xyzzy (または siteinit.l)
     同梱の sample.xyzzy の内容を追加して下さい。

     -- config.l(上で設定したファイル)
     同梱の sample.config.l をコピーして編集して下さい。

  3. xyzzyを再起動

  ※ バイトコンパイルしなおしたい時は、

     1. M-x load-library[Enter]
     2. Load library: changelogmemo/makefile[Enter]
     3. M-x cl-make-clean[Enter]
     4. M-x cl-make[Enter]

  としてください。


■アンインストール時の注意

  ツールバーを使っている場合は、
  Esc Esc (delete-command-bar 'cl-tool-bar) RET
  を実行してツールバーを削除してください。


■使うための準備(changlog file を指定の書式に変換する)

  2003-04-14 版以前のものでは、エントリに曜日をつけず、アイテムにタブをつけて
  -----------------------------------------
  * カテゴリ: ・・カテゴリ: タイトル: 本文 
  -----------------------------------------
  のように記述することを想定していました。

  これを、エントリに曜日をつけ、アイテムにタブをつけずに
  -------------------------------------------
  * タイトル [カテゴリ] ・・[カテゴリ]: 本文 
  -------------------------------------------
  と書く形式に変換します。

  以下の操作では元ファイルを書きかえますので、実行の前にバックアップをとって
  おいてください。(自己責任でお願いたします)

  操作:
  M-x cl::cl-convert を実行して、変換前のファイル名を入力し、
  最初の質問に 2, 次の質問に 1, その次の質問に 1 と答えて、
  "曜日有 + タイトル [カテゴリ]: + タブ無" の形式に変換します。


■使い方

◆基本的な使い方

・C-x 4 @ と打つか、ツールバーをクリックでメモを起動します。
・保存は、C-x C-s で行います。
・C-x k でバッファを kill するか、ツールバーをクリックでメモを終了できます。
・Ctrl を押しながらツールバーをクリックすると、別バッファにメモを起動します。


◆検索方法

・C-x 4 / とすると、google のような感じで検索します。(マイナス検索、
  フレーズ検索も可)
・検索バッファで M-/ とすることで絞込検索を行います。
・他に、正規表現検索(C-x 4 g), or 検索(C-x 4 o), カテゴリ検索(C-x 4 c),
  年検索(C-x 4 y), 月検索(C-x 4 m), 日検索(C-x 4 d), migemo 検索(C-x 4 j)
  が出来ます。
・検索画面から直接 編集して保存(C-x C-s)できます。


◆その他

・複数の CLファイルを使うときは、*cl-config-file-alist* で複数指定します。
  C-x 4 \ で CLファイルを切り替えて使ってください。
・config.l で *chalow-command* を設定すると、C-x 4 h で chalow のコマンドを
  実行できます。


■キー割り当て

[メモバッファ]

  M-Down  : 下のエントリに移動
  M-Up    : 上のエントリに移動
  C-.     : カテゴリの補完
  C-j     : (空行で押すと)アイテムを挿入
  C-x j   : エントリを挿入
  C-x C-s : メモを保存

[検索バッファ]

  M-/     : 絞込み google 検索
  M-o     : 絞込み or 検索
  M-g     : 絞込み正規表現検索
  M-c     : 絞込みカテゴリ検索
  M-y     : 絞込み日付(年)検索
  M-m     : 絞込み日付(月)検索
  M-d     : 絞込み日付(日)検索
  M-Right : 一つ先の検索に進む
  M-Left  : 一つ前の検索に戻る
  M-r     : 再検索(更新)
  M-f     : 日付検索で次の日付の検索に移動
  M-b     : 日付検索で前の日付の検索に移動
  M-Down  : 下のエントリに移動
  M-Up    : 上のエントリに移動
  M-n     : 次のリンクに移動
  M-p     : 前のリンクに移動
  TAB     : カテゴリ間を移動
  RET     : リンクの上で押すと、リンクされた検索に移動する
  ESC RET : RET とほぼ同じ(カテゴリの上で押すと絞り込まない)
  C-.     : カテゴリの補完
  C-j     : アイテムを挿入
  C-x C-s : 保存


■問題点

・ファイルが大きくなると、メモリを食い動作が遅くなる。
・検索画面で大量の編集をすると保存できない仕様。(保存に時間がかかりすぎるため)
・標準の関数 ed::show-match, close-session を書きかえている。
・*scratch* バッファの undo 情報とかリストアできない。
・その他、いろいろ。


■更新履歴

  06/03/08
  行頭にタブがない chalow 用の書式(* タイトル [カテゴリ]・・[カテゴリ]: 本文) 
  にした。
  C-x C-s でメモを保存するように変えた。
  *scratch* バッファをメモバッファとして使うようにした。
  検索の種類をふやした。(google, 正規表現, or, カテゴリ, 日付, migemo)
  絞込み検索のやり方を変更。
  検索画面から直接編集できるようにした。
  カテゴリを設定しておかなくても補完できるようにした。
  ツールバーでメモをとれるようにした。
  複数の CLファイルに対応。
  ライセンスを適用。
  その他、いろいろ変えた。

  03/04/14
  Window の退避法を変更。
  検索を修正。

  03/04/01
  空行で C-j を押すと、* : が自動的に挿入されるようにした。
  changelogmemo-mode で C-. でカテゴリ名の補完。
  検索画面で "*" をダブルクリックしても jump するようにした。
  絞込み検索の色付けを変更。

  03/01/16
  選択できなくなっていたのを修正。

  03/01/11
  Kamail, 2ch などから利用しやすくした。
  検索画面から jump できるようにした。(日付を F8, ダブルクリック)

  02/11/25 細かい修正。

  02/11/15 公開。


■ライセンス

  修正BSDライセンスとします。同梱の LICENSE.txt を参照ください。


■謝辞

  これを作成するにあたり、
  
  ・chalow(山下達雄さん)
      http://nais.to/~yto/tools/chalow/
  ・changelog.l(服部さん)
      http://www7a.biglobe.ne.jp/~hat/xyzzy/misc.html
  ・calmemo(ひえさん)
      http://hie.s64.xrea.com/xyzzy/mylib/
  ・howm(平岡さん)
      http://www.me.ics.saitama-u.ac.jp/~hira/emacs/howm/index-j.html
  ・howm-wrap(kimura さん)
      http://homepage3.nifty.com/~ko-ji/
  ・XYZZY の session.l, textmode.l(亀井さん)
      http://www.jsdlab.co.jp/~kamei/
  ・addref.l(YAMAMOTO Taizo さん)
      http://www1.odn.ne.jp/ymtz/xyzzy.html
  ・outline-tree2(OHKUBO さん)
      http://ohkubo.s53.xrea.com/xyzzy/index.html
  ・Unixのメモ技術(高林さんの記事)
      http://www.namazu.org/~satoru/unimag/1/
  
  を参考にさせていただきました。
  またいろいろな方々にご協力を頂きました。
  あらためて感謝のお礼を申し上げます。
